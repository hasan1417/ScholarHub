@import url('https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,600;0,8..60,700;1,8..60,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Landing page keyframe animations */
@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes scale-in {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes bounce-subtle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}
.animate-bounce-subtle { animation: bounce-subtle 2s ease-in-out infinite; }

@media (prefers-reduced-motion: reduce) {
  .animate-bounce-subtle { animation: none; }
}

@layer base {
  body {
    @apply bg-slate-50 text-slate-900 transition-colors duration-200 dark:bg-slate-900 dark:text-slate-100;
  }

  .dark .bg-white {
    @apply bg-slate-800;
  }

  .dark .bg-gray-50 {
    @apply bg-slate-800/80;
  }

  .dark .border-gray-200 {
    @apply border-slate-700;
  }

  .dark .text-gray-900 {
    @apply text-slate-100;
  }

  .dark .text-gray-800 {
    @apply text-slate-100;
  }

  .dark .text-gray-700 {
    @apply text-slate-200;
  }

  .dark .text-gray-600 {
    @apply text-slate-300;
  }

  .dark .text-gray-500 {
    @apply text-slate-400;
  }
}

:root {
  --latex-editor-bg: #ffffff;
  --latex-editor-fg: #000000;
  --latex-editor-font-size: 14px;
  --latex-editor-font-family: 'Monaco', 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  --latex-editor-gutter-bg: #f0f0f0;
  --latex-editor-gutter-fg: #333333;
  --latex-editor-gutter-border: transparent;
  --latex-editor-active-line-bg: rgba(0, 0, 0, 0.07);
  --latex-editor-active-line-gutter-bg: #dcdcdc;
  --latex-editor-active-line-fg: #000000;
  --latex-editor-selection-bg: rgb(181, 213, 255);
  --latex-editor-focus-ring: transparent;
  --latex-editor-fold-bg: #6B72E6;
  --latex-editor-fold-fg: #ffffff;
  --latex-editor-fold-border: transparent;
  --latex-editor-tooltip-bg: #1f2937;
  --latex-editor-tooltip-fg: #e5e7eb;
  --latex-editor-tooltip-border: #4b5563;
  --latex-editor-caret: #000000;
  --latex-editor-selection-match: rgba(250, 250, 255, 0.5);
  --latex-editor-spell: #d14343;
  --latex-editor-comment: rgb(76, 136, 107);
  --latex-editor-string: rgb(3, 106, 7);
  --latex-editor-command: #0000A2;
  --latex-editor-text: #000000;
  --latex-editor-keyword: #0000ff;
  --latex-editor-math: #833FBA;
  --latex-editor-number: #833FBA;
  --latex-editor-bracket: #000000;
  --latex-editor-operator: rgb(104, 118, 135);
}

@media (prefers-color-scheme: dark) {
  :root {
    --latex-editor-bg: #1e2133;
    --latex-editor-fg: #e9ecf8;
    --latex-editor-gutter-bg: #262a3d;
    --latex-editor-gutter-fg: #8b92b5;
    --latex-editor-gutter-border: #343850;
    --latex-editor-active-line-bg: rgba(42, 49, 72, 0.55);
    --latex-editor-active-line-gutter-bg: #2a3148;
    --latex-editor-active-line-fg: #f0f3ff;
    --latex-editor-selection-bg: #2d4f91;
    --latex-editor-focus-ring: #5b8dff;
    --latex-editor-fold-bg: #2f3652;
    --latex-editor-fold-fg: #b7c4ff;
    --latex-editor-fold-border: #3f4768;
    --latex-editor-tooltip-bg: #101522;
    --latex-editor-tooltip-fg: #e9ecf8;
    --latex-editor-tooltip-border: #3c4a6e;
    --latex-editor-caret: #7ab7ff;
    --latex-editor-selection-match: #334a78;
    --latex-editor-spell: #ff7b7b;
    --latex-editor-comment: #8fb996;
    --latex-editor-string: #f4a6b3;
    --latex-editor-command: #79aaff;
    --latex-editor-text: #e9ecf8;
    --latex-editor-keyword: #ffc76f;
    --latex-editor-math: #d6a7ff;
    --latex-editor-number: #f9c97d;
    --latex-editor-bracket: #9ac5ff;
    --latex-editor-operator: #7ab7ff;
  }
}

body.dark, [data-theme='dark'], :root.dark {
  --latex-editor-bg: #1e2133;
  --latex-editor-fg: #e9ecf8;
  --latex-editor-gutter-bg: #262a3d;
  --latex-editor-gutter-fg: #8b92b5;
  --latex-editor-gutter-border: #343850;
  --latex-editor-active-line-bg: #2a3148;
  --latex-editor-active-line-gutter-bg: #2a3148;
  --latex-editor-active-line-fg: #f0f3ff;
  --latex-editor-selection-bg: #2d4f91;
  --latex-editor-focus-ring: #5b8dff;
  --latex-editor-fold-bg: #2f3652;
  --latex-editor-fold-fg: #b7c4ff;
  --latex-editor-fold-border: #3f4768;
  --latex-editor-tooltip-bg: #101522;
  --latex-editor-tooltip-fg: #e9ecf8;
  --latex-editor-tooltip-border: #3c4a6e;
  --latex-editor-caret: #7ab7ff;
  --latex-editor-selection-match: #334a78;
  --latex-editor-spell: #ff7b7b;
  --latex-editor-comment: #8fb996;
  --latex-editor-string: #f4a6b3;
  --latex-editor-command: #79aaff;
  --latex-editor-text: #e9ecf8;
  --latex-editor-keyword: #ffc76f;
  --latex-editor-math: #d6a7ff;
  --latex-editor-number: #f9c97d;
  --latex-editor-bracket: #9ac5ff;
  --latex-editor-operator: #7ab7ff;
}

:root[data-theme='light'], body[data-theme='light'], :root.light {
  --latex-editor-bg: #ffffff;
  --latex-editor-fg: #000000;
  --latex-editor-gutter-bg: #f0f0f0;
  --latex-editor-gutter-fg: #333333;
  --latex-editor-gutter-border: transparent;
  --latex-editor-active-line-bg: rgba(0, 0, 0, 0.07);
  --latex-editor-active-line-gutter-bg: #dcdcdc;
  --latex-editor-active-line-fg: #000000;
  --latex-editor-selection-bg: rgb(181, 213, 255);
  --latex-editor-focus-ring: transparent;
  --latex-editor-fold-bg: #6B72E6;
  --latex-editor-fold-fg: #ffffff;
  --latex-editor-fold-border: transparent;
  --latex-editor-tooltip-bg: #1f2937;
  --latex-editor-tooltip-fg: #e5e7eb;
  --latex-editor-tooltip-border: #4b5563;
  --latex-editor-caret: #000000;
  --latex-editor-selection-match: rgba(250, 250, 255, 0.5);
  --latex-editor-spell: #d14343;
  --latex-editor-comment: rgb(76, 136, 107);
  --latex-editor-string: rgb(3, 106, 7);
  --latex-editor-command: #0000A2;
  --latex-editor-text: #000000;
  --latex-editor-keyword: #0000ff;
  --latex-editor-math: #833FBA;
  --latex-editor-number: #833FBA;
  --latex-editor-bracket: #000000;
  --latex-editor-operator: rgb(104, 118, 135);
}

/* Academic Editor Custom Styles using Tailwind */
@layer components {
  .academic-editor {
    @apply font-serif text-gray-800 dark:text-slate-200 leading-relaxed;
  }

  .academic-editor h1 {
    @apply text-4xl font-bold text-gray-900 dark:text-slate-100 mb-8 mt-0 pb-2 border-b-2 border-gray-200 dark:border-slate-700;
  }

  .academic-editor h2 {
    @apply text-3xl font-bold text-gray-800 dark:text-slate-100 mb-6 mt-8 pb-1 border-b border-gray-200 dark:border-slate-700;
  }

  .academic-editor h3 {
    @apply text-2xl font-bold text-gray-700 dark:text-slate-200 mb-4 mt-6;
  }

  .academic-editor p {
    @apply mb-4 text-justify;
  }

  /* Modern academic style: no indentation, use spacing instead */
  /* This follows APA, MLA, and most modern academic standards */
  .academic-editor p {
    @apply indent-0;
  }

  /* Add extra spacing between paragraphs for better readability */
  .academic-editor p + p {
    @apply mt-2;
  }

  .academic-editor ul,
  .academic-editor ol {
    @apply mb-4 pl-8;
  }

  .academic-editor li {
    @apply mb-2 leading-7;
  }

  .academic-editor blockquote {
    @apply my-6 py-4 px-6 border-l-4 border-blue-500 dark:border-blue-400 bg-gray-50 dark:bg-slate-800 italic text-gray-700 dark:text-slate-300;
  }

  .academic-editor blockquote p {
    @apply mb-0 indent-0;
  }

  .academic-editor pre {
    @apply bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md p-4 my-4 overflow-x-auto font-mono text-sm;
  }

  .academic-editor code {
    @apply bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1 py-0.5 font-mono text-sm;
  }

  .academic-editor table {
    @apply w-full border-collapse my-6 text-sm;
  }

  .academic-editor th,
  .academic-editor td {
    @apply border border-gray-200 dark:border-slate-700 p-3 text-left;
  }

  .academic-editor th {
    @apply bg-gray-50 dark:bg-slate-800 font-bold text-gray-800 dark:text-slate-200;
  }

  .academic-editor hr {
    @apply border-none border-t-2 border-gray-200 dark:border-slate-700 my-8;
  }

  .academic-editor a {
    @apply text-blue-600 dark:text-blue-400 underline;
  }

  .academic-editor a:hover {
    @apply text-blue-800 dark:text-blue-300;
  }

  /* Page break line (screen only; print handled below) */
  .page-break {
    height: 0;
    width: 100%;
    border-top: 1px dashed #cbd5e1; /* slate-300 */
    margin: 12px 0;
  }

  .dark .page-break {
    border-top-color: #475569; /* slate-600 */
  }


  /* Enhanced editor styling */
  .academic-editor.ProseMirror {
    @apply min-h-full;
  }

  /* Ensure content respects page boundaries */
  .academic-editor p:last-child {
    @apply mb-0;
  }
}

/* Custom scrollbar styles */
@layer utilities {
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
  }

  /* Firefox scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgb(209 213 219) rgb(243 244 246); /* gray-300 gray-100 */
  }

  /* Hidden scrollbar for horizontally scrollable containers */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

}

/* Visible tap highlight on mobile */
@media (hover: none) {
  button, a, [role="button"] {
    -webkit-tap-highlight-color: rgba(99, 102, 241, 0.15);
  }
}

/* Print styles for academic papers */
@media print {
  @page {
    size: A4;
    margin: 0; /* Remove default margins since our pages handle this */
  }
  
  /* Reset page layout for printing */
  .space-y-8 {
    @apply space-y-0;
  }
  
  .academic-editor {
    @apply text-black bg-white;
  }
  
  .academic-editor h1,
  .academic-editor h2,
  .academic-editor h3 {
    page-break-after: avoid;
  }
  
  .academic-editor p,
  .academic-editor blockquote,
  .academic-editor pre {
    page-break-inside: avoid;
  }
  
  .academic-editor table {
    page-break-inside: avoid;
  }
  
  /* Each discrete page should print on its own page */
  [data-page-index]:not([data-page-index="0"]) {
    page-break-before: always;
  }
  
  /* Hide interactive elements when printing */
  .print\\:hidden {
    display: none !important;
  }
  
  /* Ensure page breaks create real pagination in print */
  .page-break {
    break-before: page;
    page-break-before: always;
    border: 0;
    height: 0;
    margin: 0;
  }
}

/* Custom thin scrollbar for chat containers */
.scroll-smooth {
  scroll-behavior: smooth;
}

/* Webkit scrollbar styling */
.overflow-y-auto::-webkit-scrollbar {
  width: 6px;
}

.overflow-y-auto::-webkit-scrollbar-track {
  background: transparent;
}

.overflow-y-auto::-webkit-scrollbar-thumb {
  background-color: #cbd5e1;
  border-radius: 3px;
}

.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background-color: #94a3b8;
}

/* Dark mode scrollbar */
.dark .overflow-y-auto::-webkit-scrollbar-thumb {
  background-color: #475569;
}

.dark .overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background-color: #64748b;
}

